import{l as g,k as p,u as h,_ as x,h as L,e as a,o as f,c as _,f as o,a as i,w as r,n as A,j as k,t as C,p as E,g as I,i as D}from"./index.0463b87e.js";class V{getCategories(){return g({method:"GET",url:p("/categories"),headers:{Authorization:`Bearer ${h().token}`}}).then(e=>e.data)}save(e,c=!0){return g({method:c?"POST":"PUT",url:c?p("/categories"):p("/categories/"+e.id),headers:{Authorization:`Bearer ${h().token}`},data:e}).then(b=>b.data)}delete(e){return g({method:"DELETE",url:p("/categories/"+e.id),headers:{Authorization:`Bearer ${h().token}`}}).then(c=>c.data)}}const R={data(){return{products:null,productDialog:!1,deleteProductDialog:!1,product:{},modelType:{label:"INTERNAL",value:"INTERNAL"},selectedProducts:null,filters:{},submitted:!1,options:[{label:"INTERNAL",value:"INTERNAL"},{label:"EKSTERNAL",value:"EKSTERNAL"}],newMode:!1,store:h()}},productService:null,created(){this.productService=new V,this.initFilters()},mounted(){this.productService.getCategories().then(l=>{this.products=l})},methods:{openNew(){this.newMode=!0,this.product={},this.product.type=this.modelType.value,this.submitted=!1,this.productDialog=!0},hideDialog(){this.productDialog=!1,this.submitted=!1},validateInput(){return this.product.type&&this.product.category},saveProduct(){this.submitted=!0,this.validateInput()?this.productService.save(this.product,this.newMode).then(l=>{this.productDialog=!1,this.product={},this.$toast.add({severity:"success",summary:"Successful",detail:"Document Saved",life:3e3}),this.productService.getCategories().then(e=>{this.products=e})}):console.log(this.product,"oops")},editProduct(l){this.newMode=!1,this.product={...l},this.productDialog=!0},confirmDeleteProduct(l){this.product=l,this.deleteProductDialog=!0},deleteProduct(){this.productService.delete(this.product).then(l=>{this.deleteProductDialog=!1,this.$toast.add({severity:"success",summary:"Successful",detail:"Kategori Deleted",life:3e3}),this.productService.getCategories().then(e=>{this.products=e})})},confirmDeleteSelected(){this.deleteProductsDialog=!0},initFilters(){this.filters={global:{value:null,matchMode:L.CONTAINS}}},onChange(){this.product.type=this.modelType.value}}},u=l=>(E("data-v-86daf51d"),l=l(),I(),l),B={class:"card"},K={class:"table-header flex flex-column md:flex-row md:justiify-content-between"},M=u(()=>i("h5",{class:"mb-2 md:m-0 p-as-md-center"},"Manage Kategori Dokumen",-1)),U={class:"p-input-icon-left"},z=u(()=>i("i",{class:"pi pi-search"},null,-1)),F={class:"field"},O=u(()=>i("label",{for:"tipe",class:"mb-3"},"Tipe Dokumen",-1)),j={class:"field"},q=u(()=>i("label",{for:"name"},"Kategori",-1)),G={key:0,class:"p-error"},Y={class:"confirmation-content"},H=u(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),J={key:0},Q=D("Anda yakin untuk menghapus "),W=D("?");function X(l,e,c,b,t,n){const P=a("Toast"),d=a("Button"),T=a("Toolbar"),v=a("InputText"),m=a("Column"),w=a("DataTable"),S=a("Dropdown"),y=a("Dialog");return f(),_("div",null,[o(P),i("div",B,[o(T,{class:"mb-4"},{start:r(()=>[o(d,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:n.openNew},null,8,["onClick"])]),end:r(()=>[]),_:1}),o(w,{ref:"dt",value:t.products,selection:t.selectedProducts,"onUpdate:selection":e[1]||(e[1]=s=>t.selectedProducts=s),dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll"},{header:r(()=>[i("div",K,[M,i("span",U,[z,o(v,{modelValue:t.filters.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>t.filters.global.value=s),placeholder:"Search..."},null,8,["modelValue"])])])]),default:r(()=>[o(m,{field:"type",header:"Tipe",sortable:!0,style:{"min-width":"10rem"}}),o(m,{field:"category",header:"Category",sortable:!0,style:{"min-width":"10rem"}}),o(m,{exportable:!1,style:{"min-width":"8rem"},header:"Aksi"},{body:r(s=>[o(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:N=>n.editProduct(s.data)},null,8,["onClick"]),o(d,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning",disabled:t.store.isNotAdmin(),onClick:N=>n.confirmDeleteProduct(s.data)},null,8,["disabled","onClick"])]),_:1})]),_:1},8,["value","selection","filters"])]),o(y,{visible:t.productDialog,"onUpdate:visible":e[4]||(e[4]=s=>t.productDialog=s),style:{width:"450px"},header:"Kategori Details",modal:!0,class:"p-fluid"},{footer:r(()=>[o(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:n.hideDialog},null,8,["onClick"]),o(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:n.saveProduct},null,8,["onClick"])]),default:r(()=>[i("div",F,[O,o(S,{id:"tipe",modelValue:t.modelType,"onUpdate:modelValue":e[2]||(e[2]=s=>t.modelType=s),options:t.options,optionLabel:"label",placeholder:"Pilih Tipe Dokumen",onChange:n.onChange},null,8,["modelValue","options","onChange"])]),i("div",j,[q,o(v,{id:"name",modelValue:t.product.category,"onUpdate:modelValue":e[3]||(e[3]=s=>t.product.category=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:A({"p-invalid":t.submitted&&!t.product.category})},null,8,["modelValue","class"]),t.submitted&&!t.product.category?(f(),_("small",G,"Kategori harus diisi.")):k("",!0)])]),_:1},8,["visible"]),o(y,{visible:t.deleteProductDialog,"onUpdate:visible":e[6]||(e[6]=s=>t.deleteProductDialog=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[o(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[5]||(e[5]=s=>t.deleteProductDialog=!1)}),o(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:n.deleteProduct},null,8,["onClick"])]),default:r(()=>[i("div",Y,[H,t.product?(f(),_("span",J,[Q,i("b",null,C(t.product.type)+" - "+C(t.product.category),1),W])):k("",!0)])]),_:1},8,["visible"])])}const $=x(R,[["render",X],["__scopeId","data-v-86daf51d"]]);export{$ as default};
