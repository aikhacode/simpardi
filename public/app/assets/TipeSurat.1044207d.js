import{b as _,v as p,u as m,_ as x,F as A,c as v,f as o,a as i,w as r,r as u,o as b,n as S,h as P,t as k,k as L,l as E,g as D}from"./index.3161402e.js";class I{getTipeSurats(){return _({method:"GET",url:p("/tipesurat"),headers:{Authorization:`Bearer ${m().token}`}}).then(e=>e.data)}save(e,n=!0){return _({method:n?"POST":"PUT",url:n?p("/tipesurat"):p("/tipesurat/"+e.id),headers:{Authorization:`Bearer ${m().token}`},data:e}).then(g=>g.data)}delete(e){return _({method:"DELETE",url:p("/tipesurat/"+e.id),headers:{Authorization:`Bearer ${m().token}`}}).then(n=>n.data)}}const V={data(){return{products:null,productDialog:!1,deleteProductDialog:!1,product:{},modelType:{label:"INTERNAL",value:"INTERNAL"},selectedProducts:null,filters:{},submitted:!1,options:[{label:"INTERNAL",value:"INTERNAL"},{label:"EKSTERNAL",value:"EKSTERNAL"}],newMode:!1,store:m()}},productService:null,created(){this.productService=new I,this.initFilters()},mounted(){this.productService.getTipeSurats().then(l=>{this.products=l})},methods:{openNew(){this.newMode=!0,this.product={},this.product.type=this.modelType.value,this.submitted=!1,this.productDialog=!0},hideDialog(){this.productDialog=!1,this.submitted=!1},validateInput(){return this.product.tipe&&this.product.template},saveProduct(){this.submitted=!0,this.validateInput()?this.productService.save(this.product,this.newMode).then(l=>{this.productDialog=!1,this.product={},this.$toast.add({severity:"success",summary:"Successful",detail:"Document Saved",life:3e3}),this.productService.getTipeSurats().then(e=>{this.products=e})}):console.log(this.product,"oops")},editProduct(l){this.newMode=!1,this.product={...l},this.productDialog=!0},confirmDeleteProduct(l){this.product=l,this.deleteProductDialog=!0},deleteProduct(){this.productService.delete(this.product).then(l=>{this.deleteProductDialog=!1,this.$toast.add({severity:"success",summary:"Successful",detail:"Kategori Deleted",life:3e3}),this.productService.getCategories().then(e=>{this.products=e})})},confirmDeleteSelected(){this.deleteProductsDialog=!0},initFilters(){this.filters={global:{value:null,matchMode:A.CONTAINS}}},onChange(){this.product.type=this.modelType.value}}},c=l=>(L("data-v-c09574c1"),l=l(),E(),l),R={class:"card"},M={class:"table-header flex flex-column md:flex-row md:justiify-content-between"},B=c(()=>i("h5",{class:"mb-2 md:m-0 p-as-md-center"},"Manage Tipe Surat",-1)),U={class:"p-input-icon-left"},z=c(()=>i("i",{class:"pi pi-search"},null,-1)),F={class:"field"},K=c(()=>i("label",{for:"tipe",class:"mb-3"},"Tipe Surat",-1)),O={class:"field"},q=c(()=>i("label",{for:"name"},"Template No Surat",-1)),j={key:0,class:"p-error"},G={class:"confirmation-content"},Y=c(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),H={key:0},J=D("Anda yakin untuk menghapus "),Q=D("?");function W(l,e,n,g,t,d){const y=u("Toast"),a=u("Button"),C=u("Toolbar"),h=u("InputText"),f=u("Column"),N=u("DataTable"),T=u("Dialog");return b(),v("div",null,[o(y),i("div",R,[o(C,{class:"mb-4"},{start:r(()=>[o(a,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:d.openNew},null,8,["onClick"])]),end:r(()=>[]),_:1}),o(N,{ref:"dt",value:t.products,selection:t.selectedProducts,"onUpdate:selection":e[1]||(e[1]=s=>t.selectedProducts=s),dataKey:"id",paginator:!0,rows:10,filters:t.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll"},{header:r(()=>[i("div",M,[B,i("span",U,[z,o(h,{modelValue:t.filters.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>t.filters.global.value=s),placeholder:"Search..."},null,8,["modelValue"])])])]),default:r(()=>[o(f,{field:"tipe",header:"Tipe",sortable:!0,style:{"min-width":"10rem"}}),o(f,{field:"template",header:"Template No",sortable:!0,style:{"min-width":"10rem"}}),o(f,{exportable:!1,style:{"min-width":"8rem"},header:"Aksi"},{body:r(s=>[o(a,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:w=>d.editProduct(s.data)},null,8,["onClick"]),o(a,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning",disabled:t.store.isNotAdmin(),onClick:w=>d.confirmDeleteProduct(s.data)},null,8,["disabled","onClick"])]),_:1})]),_:1},8,["value","selection","filters"])]),o(T,{visible:t.productDialog,"onUpdate:visible":e[4]||(e[4]=s=>t.productDialog=s),style:{width:"450px"},header:"Kategori Details",modal:!0,class:"p-fluid"},{footer:r(()=>[o(a,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:d.hideDialog},null,8,["onClick"]),o(a,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:d.saveProduct},null,8,["onClick"])]),default:r(()=>[i("div",F,[K,o(h,{id:"name",modelValue:t.product.tipe,"onUpdate:modelValue":e[2]||(e[2]=s=>t.product.tipe=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:S({"p-invalid":t.submitted&&!t.product.tipe})},null,8,["modelValue","class"])]),i("div",O,[q,o(h,{id:"name",modelValue:t.product.template,"onUpdate:modelValue":e[3]||(e[3]=s=>t.product.template=s),modelModifiers:{trim:!0},required:"true",autofocus:"",class:S({"p-invalid":t.submitted&&!t.product.template})},null,8,["modelValue","class"]),t.submitted&&!t.product.template?(b(),v("small",j,"Template No Surat harus diisi.")):P("",!0)])]),_:1},8,["visible"]),o(T,{visible:t.deleteProductDialog,"onUpdate:visible":e[6]||(e[6]=s=>t.deleteProductDialog=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[o(a,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[5]||(e[5]=s=>t.deleteProductDialog=!1)}),o(a,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:d.deleteProduct},null,8,["onClick"])]),default:r(()=>[i("div",G,[Y,t.product?(b(),v("span",H,[J,i("b",null,k(t.product.type)+" - "+k(t.product.category),1),Q])):P("",!0)])]),_:1},8,["visible"])])}const Z=x(V,[["render",W],["__scopeId","data-v-c09574c1"]]);export{Z as default};
